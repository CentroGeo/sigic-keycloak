import{jsx as l,jsxs as d}from"react/jsx-runtime";import{useMemo as T,useEffect as $,Fragment as G}from"react";import{a as q,Z as D,J as E,bu as J,bv as f,a1 as L,h as v,B as m,a4 as P,ac as S}from"./main-Dml5vH_M.js";function g(e){return typeof e=="string"?e.split("##"):[e||""]}function I(e){return e.join("##")}const w=({name:e,addButtonLabel:b,isDisabled:i=!1,defaultValue:o,stringify:u=!1,isRequired:y=!1,id:A,...C})=>{const{t:n}=q(),{register:p,setValue:M,control:V}=D(),r=E({name:e,control:V,defaultValue:o||""}),s=T(()=>{let t=u?g(Array.isArray(r)&&r.length===1?r[0]:r):Array.isArray(r)?r:[r];return(!Array.isArray(t)||t.length===0)&&(t=(u?g(o):o)||[""]),t},[r]),k=t=>{c([...s.slice(0,t),...s.slice(t+1)])},j=()=>{c([...s,""])},B=(t,a)=>{c([...s.slice(0,t),a,...s.slice(t+1)])},c=t=>{const a=t.flatMap(h=>h);M(e,u?I(a):a,{shouldDirty:!0,shouldValidate:!0})};return $(()=>{p(e,{validate:t=>y&&I(t||[]).length===0?n("required"):void 0})},[p]),l("div",{id:A,children:s.map((t,a)=>d(G,{children:[d(J,{children:[l(f,{isFill:!0,children:l(L,{"data-testid":e+a,onChange:(h,F)=>B(a,F),name:`${e}.${a}.value`,value:t,isDisabled:i,...C})}),l(f,{children:l(v,{"data-testid":"remove"+a,variant:m.link,onClick:()=>k(a),tabIndex:-1,"aria-label":n("remove"),isDisabled:s.length===1||i,children:l(P,{})})})]}),a===s.length-1&&d(v,{variant:m.link,onClick:j,tabIndex:-1,"aria-label":n("add"),"data-testid":`${e}-addValue`,isDisabled:!t||i,children:[l(S,{})," ",n(b||"add")]})]},a))})};export{w as M};
//# sourceMappingURL=MultiLineInput-BnUu5qtj.js.map
