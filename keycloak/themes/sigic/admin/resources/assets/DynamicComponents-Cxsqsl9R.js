import{jsx as t,jsxs as T,Fragment as U}from"react/jsx-runtime";import{a as I,Z as S,K as v,N as $,S as Y,O as b,bu as Z,bv as q,U as Q,W as B,h as x,bn as K,bo as D,ai as z,cR as O,ay as V,az as N,a1 as G,a4 as X,ac as P,a9 as ee,ad as te,ae as ne,bK as ae,z as le,_ as oe,a0 as _,a5 as J,Y as F,cS as re,J as se,c0 as ie,u as ce,j as de,b1 as ue}from"./main-Dml5vH_M.js";import{C as pe}from"./ClientSelect-DJq4F1jh.js";import{useState as L,useEffect as he}from"react";import{F as me}from"./FileUpload-B3CkDAbJ.js";import{G as fe}from"./GroupPickerDialog-eQJqBPQt.js";import{A as ge,a as Ce,K as Ie}from"./KeySelect-Ba6sDuzD.js";import{M as ve}from"./MultiLineInput-BnUu5qtj.js";import{A as be,S as ye}from"./AddRoleMappingModal-FlNvMd3n.js";import{a as Se}from"./CodeEditor-C7HQ48Ys.js";const Te=({name:e,label:n,helpText:i,isDisabled:l=!1,defaultValue:s,isNew:r=!0,convertToName:c})=>{const{t:a}=I(),{control:u}=S();return t(v,{hasNoPaddingTop:!0,label:a(n),fieldId:e,labelIcon:t(b,{helpText:a(i),fieldLabelId:`${n}`}),children:t($,{name:c(e),"data-testid":e,defaultValue:r?s:!1,control:u,render:({field:d})=>t(Y,{id:e,isDisabled:l,label:a("on"),labelOff:a("off"),isChecked:d.value==="true"||d.value===!0||d.value?.[0]==="true",onChange:(g,p)=>d.onChange(""+p),"data-testid":e,"aria-label":a(n)})})})},Le=e=>t(pe,{...e,name:e.convertToName(e.name)}),$e=({name:e,label:n,helpText:i,defaultValue:l,required:s,isDisabled:r=!1,convertToName:c})=>{const{t:a}=I(),{control:u}=S(),[d,g]=L(""),[p,h]=L(!1);return t(v,{label:a(n),labelIcon:t(b,{helpText:a(i),fieldLabelId:`${n}`}),fieldId:e,isRequired:s,children:t($,{name:c(e),control:u,defaultValue:l||"",render:({field:o})=>t(me,{id:e,value:o.value,type:"text",filename:d,isDisabled:r,onFileInputChange:(C,y)=>g(y.name),onReadStarted:()=>h(!0),onReadFinished:()=>h(!1),onClearClick:()=>{o.onChange(""),g("")},isLoading:p,allowEditingUploadedText:!1,onTextChange:C=>{o.onChange(C)},onDataChange:(C,y)=>{o.onChange(y)}})})})},ke=({name:e,label:n,helpText:i,required:l,convertToName:s})=>{const{t:r}=I(),[c,a]=L(!1),[u,d]=L(),{control:g}=S();return t($,{name:s(e),defaultValue:"",control:g,render:({field:p})=>T(U,{children:[c&&t(fe,{type:"selectOne",text:{title:"selectGroup",ok:"select"},onConfirm:h=>{p.onChange(h?.[0].path),d(h),a(!1)},onClose:()=>a(!1),filterGroups:u}),t(v,{label:r(n),labelIcon:t(b,{helpText:r(i),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:T(Z,{children:[t(q,{children:t(Q,{children:p.value&&t(B,{onClick:()=>p.onChange(void 0),children:p.value})})}),t(q,{children:t(x,{id:"kc-join-groups-button",onClick:()=>a(!c),variant:"secondary","data-testid":"join-groups-button",children:r("selectGroup")})})]})})]})})},we=({name:e,label:n,helpText:i,defaultValue:l,options:s,required:r,isDisabled:c=!1,convertToName:a})=>{const{t:u}=I(),{control:d}=S(),[g,p]=L(!1);return t(v,{label:u(n),labelIcon:t(b,{helpText:u(i),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:t($,{name:a(e),"data-testid":e,defaultValue:l||s?.[0]||"",control:d,render:({field:h})=>t(K,{toggleId:e,isDisabled:c,onToggle:o=>p(o),onSelect:o=>{h.onChange(o),p(!1)},selections:h.value,variant:D.single,"aria-label":u(n),isOpen:g,children:s?.map(o=>t(z,{selected:o===h.value,value:o,children:o},o))})})})},Ne=({name:e,label:n,helpText:i,required:l,isDisabled:s,defaultValue:r,convertToName:c})=>{const{t:a}=I(),{getValues:u,setValue:d,register:g}=S(),[p,h]=L([]),o=c(e);he(()=>{g(o);const f=JSON.parse(u(o)||r||"[]");h(f.map(m=>({...m,id:O()})))},[]);const C=()=>h([...p,{key:"",value:"",id:O()}]),y=(f=p)=>{d(o,JSON.stringify(f.filter(m=>m.key!=="").map(({id:m,...R})=>R)))},w=(f,m)=>{A(f,{...p[f],key:m})},k=(f,m)=>{A(f,{...p[f],value:m})},A=(f,m)=>h([...p.slice(0,f),m,...p.slice(f+1)]),H=f=>{const m=[...p.slice(0,f),...p.slice(f+1)];h(m),y(m)};return p.length!==0?T(v,{label:a(n),labelIcon:t(b,{helpText:a(i),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:[T(V,{direction:{default:"column"},children:[T(V,{children:[t(N,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t("strong",{children:a("key")})}),t(N,{grow:{default:"grow"},children:t("strong",{children:a("value")})})]}),p.map((f,m)=>T(V,{"data-testid":"row",children:[t(N,{grow:{default:"grow"},children:t(G,{name:`${o}.${m}.key`,placeholder:a("keyPlaceholder"),"aria-label":a("key"),defaultValue:f.key,"data-testid":`${o}.${m}.key`,onChange:(R,M)=>w(m,M),onBlur:()=>y()})}),t(N,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t(G,{name:`${o}.${m}.value`,placeholder:a("valuePlaceholder"),"aria-label":a("value"),defaultValue:f.value,"data-testid":`${o}.${m}.value`,onChange:(R,M)=>k(m,M),onBlur:()=>y()})}),t(N,{children:t(x,{variant:"link",title:a("removeAttribute"),isDisabled:s,onClick:()=>H(m),"data-testid":`${o}.${m}.remove`,children:t(X,{})})})]},f.id))]}),t(ge,{children:t(Ce,{children:t(x,{"data-testid":`${o}-add-row`,className:"pf-v5-u-px-0 pf-v5-u-mt-sm",variant:"link",icon:t(P,{}),onClick:()=>C(),children:a("addAttribute",{label:n})})})})]}):T(ee,{"data-testid":`${e}-empty-state`,className:"pf-v5-u-p-0",variant:"xs",children:[t(te,{children:a("missingAttributes",{label:n})}),t(ne,{children:t(x,{"data-testid":`${e}-add-row`,variant:"link",icon:t(P,{}),size:"sm",onClick:C,isDisabled:s,children:a("addAttribute",{label:n})})})]})};function E(e){return typeof e=="string"&&e.length>0?e.split("##"):[]}function xe(e){return e.join("##")}const Ae=({name:e,label:n,helpText:i,defaultValue:l,options:s,isDisabled:r=!1,stringify:c,required:a,convertToName:u})=>{const{t:d}=I(),{control:g}=S(),[p,h]=L(!1);return t(v,{label:d(n),labelIcon:t(b,{helpText:d(i),fieldLabelId:`${n}`}),fieldId:e,isRequired:a,children:t($,{name:u(e),control:g,defaultValue:c?l||"":l?[l]:[],render:({field:o})=>t(K,{toggleId:e,"data-testid":e,isDisabled:r,chipGroupProps:{numChips:3,expandedText:d("hide"),collapsedText:d("showRemaining")},variant:D.typeaheadMulti,typeAheadAriaLabel:"Select",onToggle:C=>h(C),selections:c?E(o.value):o.value,onSelect:C=>{const y=C.toString(),w=c?E(o.value):o.value;let k;w.includes(y)?k=w.filter(A=>A!==y):k=[...w,y],o.onChange(c?xe(k):k)},onClear:()=>{o.onChange(c?"":[])},isOpen:p,"aria-label":d(n),children:s?.map(C=>t(z,{value:C,children:C},C))})})})};function Re(e){return e&&Array.isArray(e)?e:[e]}const Me=({name:e,label:n,defaultValue:i,helpText:l,stringify:s,required:r,isDisabled:c=!1,convertToName:a})=>{const{t:u}=I(),d=a(e);return t(v,{label:u(n),labelIcon:t(b,{helpText:u(l),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:t(ve,{"aria-label":u(n),name:d,isDisabled:c,defaultValue:Re(i),addButtonLabel:u("addMultivaluedLabel",{fieldLabel:u(n).toLowerCase()}),stringify:s})})},Ve=({name:e,label:n,helpText:i,defaultValue:l,required:s,isDisabled:r=!1,convertToName:c})=>{const{t:a}=I();return t(ae,{name:c(e),label:a(n),labelIcon:a(i),isDisabled:r,defaultValue:l?.toString(),rules:{required:{value:!!s,message:a("required")}}})},j=e=>e?.includes(".")?e.split("."):["",e||""],Fe=e=>e.client?.clientId?`${e.client.clientId}.${e.role.name}`:e.role.name,qe=({name:e,label:n,helpText:i,defaultValue:l,required:s,isDisabled:r=!1,convertToName:c})=>{const{t:a}=I(),[u,d]=le(),{control:g,formState:{errors:p}}=S(),h=c(e);return T(v,{label:a(n),labelIcon:t(b,{helpText:a(i),fieldLabelId:`${n}`}),fieldId:e,isRequired:s,children:[t($,{name:h,defaultValue:l||"",control:g,render:({field:o})=>T(oe,{children:[u&&t(be,{id:"id",type:"roles",name:e,onAssign:C=>o.onChange(Fe(C[0])),onClose:d,isRadio:!0}),o.value!==""&&t(_,{children:t(B,{textMaxWidth:"500px",onClick:()=>o.onChange(""),children:t(ye,{role:{name:j(o.value)[1]},client:{clientId:j(o.value)[0]}})})}),t(_,{children:t(x,{onClick:d,variant:"secondary","data-testid":"add-roles",disabled:r,children:a("selectRole.label")})})]})}),p[h]&&t(J,{message:a("required")})]})},Oe=({name:e,label:n,helpText:i,defaultValue:l,required:s,isDisabled:r=!1,convertToName:c})=>{const{t:a}=I(),{control:u}=S();return t(v,{label:a(n),labelIcon:t(b,{helpText:t("span",{style:{whiteSpace:"pre-wrap"},children:i}),fieldLabelId:`${n}`}),fieldId:e,isRequired:s,children:t($,{name:c(e),defaultValue:l,control:u,render:({field:d})=>t(Se,{id:e,"data-testid":e,readOnly:r,onChange:d.onChange,value:Array.isArray(d.value)?d.value[0]:d.value,language:"js",height:600})})})},Ge=({name:e,label:n,helpText:i,convertToName:l,...s})=>{const{t:r}=I();return t(F,{name:l(e),label:r(n),labelIcon:r(i),"data-testid":e,...s})},Pe=({name:e,label:n,helpText:i,defaultValue:l,required:s,isDisabled:r=!1,convertToName:c})=>{const{t:a}=I(),{register:u}=S();return t(v,{label:a(n),labelIcon:t(b,{helpText:a(i),fieldLabelId:`${n}`}),fieldId:e,required:s,children:t(re,{id:e,"data-testid":e,isDisabled:r,defaultValue:l?.toString(),...u(c(e))})})},_e=({name:e,label:n,helpText:i})=>{const{t:l}=I(),{control:s}=S(),{value:r}=se({control:s,name:e,defaultValue:""});return t(v,{label:l(n),fieldId:e,labelIcon:t(b,{helpText:l(i),fieldLabelId:`${n}`}),className:"keycloak__identity-providers__url_component",children:t(ie,{title:l(i),href:r,isInline:!0})})},Ee=({name:e,label:n,helpText:i,required:l=!1,convertToName:s})=>{const{adminClient:r}=ce(),{t:c}=I(),{formState:{errors:a}}=S(),[u,d]=L(),g=s(e);de(()=>r.users.getProfile(),h=>d(h),[]);const p=h=>h?.attributes?h.attributes.map(o=>({key:o.name,label:o.name})):[];return u?T(v,{label:c(n),isRequired:l,labelIcon:t(b,{helpText:c(i),fieldLabelId:n}),fieldId:g,children:[t(Ie,{name:g,rules:l?{required:!0}:{},selectItems:p(u)}),a[g]&&t(J,{message:c("required")})]}):null},je=({name:e,label:n,helpText:i,convertToName:l,...s})=>{const{t:r}=I();return t(F,{name:l(e),type:"number",pattern:"\\d*",label:r(n),labelIcon:r(i),"data-testid":e,...s})},Ue=({name:e,label:n,helpText:i,convertToName:l,...s})=>{const{t:r}=I();return t(F,{name:l(e),type:"number",label:r(n),labelIcon:r(i),"data-testid":e,...s})},W={String:Ge,Text:Pe,boolean:Te,Integer:je,Number:Ue,List:we,Role:qe,Script:Oe,Map:Ne,Group:ke,ClientList:Le,UserProfileAttributeList:Ee,MultivaluedList:Ae,MultivaluedString:Me,File:$e,Password:Ve,Url:_e},Be=e=>e in W,tt=({convertToName:e,properties:n,...i})=>t(U,{children:n.map(l=>{const s=l.type;if(Be(s)){const r=W[s];return t(r,{...l,...i,convertToName:e||Ke},l.name)}else console.warn(`There is no editor registered for ${s}`)})}),Ke=e=>ue(`config.${e}`);export{tt as D,Ke as c};
//# sourceMappingURL=DynamicComponents-Cxsqsl9R.js.map
