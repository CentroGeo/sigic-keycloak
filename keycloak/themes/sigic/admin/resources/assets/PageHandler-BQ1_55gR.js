import{jsx as t,jsxs as f}from"react/jsx-runtime";import{u as E,a as F,l as L,d as O,V as R,j as w,y as x,P as D,F as I,n as V,A as _,h as u,L as B,k as H}from"./main-Dml5vH_M.js";import{useState as p}from"react";import{D as N}from"./DynamicComponents-Cxsqsl9R.js";import{u as T}from"./useParams-Cmi1OAEj.js";import{T as g}from"./constants-BclHbWtx.js";const Q=({id:h,providerType:m,page:{id:o,...P}})=>{const{adminClient:r}=E(),{t:n}=F(),c=L(),{realm:y,realmRepresentation:S}=O(),{addAlert:b,addError:A}=R(),[i,d]=p(h),l=T(),[j,k]=p(!0);w(async()=>await Promise.all([i?r.components.findOne({id:i}):Promise.resolve(),m===g?r.components.find({type:g}):Promise.resolve()]),([a,s])=>{const e=(s||[]).find(C=>C.providerId===o);c.reset(a||e||{}),e&&d(e.id),k(!1)},[]);const v=async a=>{(a.config||l)&&(a.config=Object.assign(a.config||{},l),Object.entries(a.config).forEach(([s,e])=>a.config[s]=Array.isArray(e)?e:[e]));try{const s={...a,providerId:o,providerType:m,parentId:S?.id};if(i)await r.components.update({id:i},s);else{const{id:e}=await r.components.create(s);d(e)}b(n("itemSaveSuccessful"))}catch(s){A("itemSaveError",s)}};return j?t(x,{}):t(D,{variant:"light",children:f(I,{isHorizontal:!0,onSubmit:c.handleSubmit(v),className:"keycloak__form",children:[t(V,{...c,children:t(N,{properties:P.properties})}),f(_,{children:[t(u,{"data-testid":"save",type:"submit",children:n("save")}),t(u,{variant:"link",component:a=>t(B,{...a,to:H({realm:y,providerId:o})}),children:n("cancel")})]})]})})};export{Q as P};
//# sourceMappingURL=PageHandler-BQ1_55gR.js.map
