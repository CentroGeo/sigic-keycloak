import{jsxs as v,Fragment as E,jsx as l}from"react/jsx-runtime";import{useState as y,useMemo as I}from"react";import{u as x,a as C,Z as S,K as T,S as k,O as H,Y as j,cB as q}from"./main-Dml5vH_M.js";const h=(r,t,i={})=>{if(!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let a,e,d=[];return function(...u){return new Promise(o=>{const n=i.before&&!e;clearTimeout(e),e=setTimeout(()=>{e=null;const p=i.before?a:r.apply(this,u);for(o of d)o(p);d=[]},t),n?(a=r.apply(this,u),o(a)):d.push(o)})}};h.promise=r=>{let t;return async function(...i){if(t)return t;try{return t=r.apply(this,i),await t}finally{t=void 0}}};const N=({id:r,fileUpload:t,children:i})=>{const{adminClient:a}=x(),{t:e}=C(),{setValue:d,clearErrors:u,formState:{errors:o}}=S(),[n,p]=y(!0),[b,m]=y(!1),[f,D]=y(),w=c=>{Object.keys(c).map(s=>d(`config.${s}`,c[s]))},g=async c=>{m(!0);try{const s=await a.identityProviders.importFromUrl({providerId:r,fromUrl:c});w(s),D(s)}catch(s){return s.message}finally{m(!1)}},F=I(()=>h(g,1e3),[]);return v(E,{children:[l(T,{label:e(r==="oidc"?"useDiscoveryEndpoint":"useEntityDescriptor"),fieldId:"kc-discovery-endpoint",labelIcon:l(H,{helpText:e(r==="oidc"?"useDiscoveryEndpointHelp":"useEntityDescriptorHelp"),fieldLabelId:"discoveryEndpoint"}),children:l(k,{id:"kc-discovery-endpoint-switch",label:e("on"),labelOff:e("off"),isChecked:n,onChange:(c,s)=>{u("discoveryError"),p(s)},"aria-label":e(r==="oidc"?"useDiscoveryEndpoint":"useEntityDescriptor")})}),n&&v(E,{children:[l("div",{style:{display:"none"},"data-testid":"playwright-result",children:o.discoveryError||o.discoveryEndpoint?"error":f?"success":"default"}),l(j,{name:"discoveryEndpoint",label:e(r==="oidc"?"discoveryEndpoint":"samlEntityDescriptor"),labelIcon:e(r==="oidc"?"discoveryEndpointHelp":"samlEntityDescriptorHelp"),type:"url",placeholder:r==="oidc"?"https://hostname/realms/master/.well-known/openid-configuration":"",validated:o.discoveryError||o.discoveryEndpoint?"error":f?"success":"default",customIcon:b?l(q,{isInline:!0}):void 0,rules:{required:e("required"),validate:c=>F(c)}})]}),!n&&t,n&&!o.discoveryError&&i(!0),!n&&i(!1)]})};export{N as D};
//# sourceMappingURL=DiscoveryEndpointField-CNI2Maam.js.map
