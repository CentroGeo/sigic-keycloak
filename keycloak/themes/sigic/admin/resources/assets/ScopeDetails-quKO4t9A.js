import{jsxs as c,Fragment as I,jsx as t}from"react/jsx-runtime";import{u as w,a as z,b as N,V as F,z as V,l as k,j as C,bT as l,D as H,P as U,n as P,Y as d,A as T,h as m,B as j,L as q,q as x}from"./main-Dml5vH_M.js";import{useState as B}from"react";import{F as E}from"./FormAccess-Dgk035ov.js";import{V as L}from"./ViewHeader-CnGpO8mW.js";import{u as Y}from"./useParams-Cmi1OAEj.js";import{D as G}from"./DeleteScopeDialog-CdT950ew.js";import"react-dom";import"./ConfirmDialog-BN0phSta.js";function _(){const{adminClient:n}=w(),{t:e}=z(),{id:o,scopeId:i,realm:s}=Y(),p=N(),{addAlert:S,addError:f}=F(),[v,u]=V(),[r,h]=B(),g=k({mode:"onChange"}),{reset:b,handleSubmit:y}=g;C(async()=>{if(i){const a=await n.clients.getAuthorizationScope({id:o,scopeId:i});if(!a)throw new Error(e("notFound"));return a}},a=>{h(a),b({...a})},[]);const A=async a=>{try{i?(await n.clients.updateAuthorizationScope({id:o,scopeId:i},a),h(a)):(await n.clients.createAuthorizationScope({id:o},{name:a.name,displayName:a.displayName,iconUri:a.iconUri}),p(l({realm:s,clientId:o,tab:"scopes"}))),S(e((i?"update":"create")+"ScopeSuccess"),x.success)}catch(D){f("scopeSaveError",D)}};return c(I,{children:[t(G,{clientId:o,open:v,toggleDialog:u,selectedScope:r,refresh:()=>p(l({realm:s,clientId:o,tab:"scopes"}))}),t(L,{titleKey:i?r?.name:e("createAuthorizationScope"),dropdownItems:i?[t(H,{"data-testid":"delete-resource",onClick:()=>u(),children:e("delete")},"delete")]:void 0}),t(U,{variant:"light",children:t(P,{...g,children:c(E,{isHorizontal:!0,role:"manage-authorization",onSubmit:y(A),children:[t(d,{name:"name",label:e("name"),labelIcon:e("scopeNameHelp"),rules:{required:e("required")}}),t(d,{name:"displayName",label:e("displayName"),labelIcon:e("scopeDisplayNameHelp")}),t(d,{name:"iconUri",label:e("iconUri"),labelIcon:e("iconUriHelp")}),t(T,{children:c("div",{className:"pf-v5-u-mt-md",children:[t(m,{variant:j.primary,type:"submit","data-testid":"save",children:e("save")}),r?t(m,{variant:"link","data-testid":"revert",onClick:()=>b({...r}),children:e("revert")}):t(m,{variant:"link","data-testid":"cancel",component:a=>t(q,{...a,to:l({realm:s,clientId:o,tab:"scopes"})}),children:e("cancel")})]})})]})})})]})}export{_ as default};
//# sourceMappingURL=ScopeDetails-quKO4t9A.js.map
