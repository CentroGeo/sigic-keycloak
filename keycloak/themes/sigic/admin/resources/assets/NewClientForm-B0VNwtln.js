import{jsxs as U,jsx as W,Fragment as ue}from"react/jsx-runtime";import{as as O,h as q,B as G,ar as h,b2 as me,b3 as pe,b4 as ve,b5 as ne,b6 as fe,b7 as be,b8 as ge,a as X,a_ as xe,$ as ze,u as Ne,d as Ee,b as Se,V as we,l as ye,P as he,n as Ce,b9 as Ie,p as ke,q as Te,ba as _e}from"./main-Dml5vH_M.js";import{F as ie}from"./FormAccess-Dgk035ov.js";import{V as Be}from"./ViewHeader-CnGpO8mW.js";import{C as We,a as Oe}from"./ClientDescription-Cz5krl3V.js";import{g as je}from"./utils-C-TUnOch.js";import{L as Fe}from"./LoginSettings-Cv6U-5ti.js";import*as I from"react";import t,{useState as Ve}from"react";import"react-dom";import"./SwitchControl-DVIXTwQM.js";import"./MultiLineInput-BnUu5qtj.js";const z={modifiers:{expanded:"pf-m-expanded",current:"pf-m-current",expandable:"pf-m-expandable",disabled:"pf-m-disabled",noPadding:"pf-m-no-padding"},wizard:"pf-v5-c-wizard",wizardFooter:"pf-v5-c-wizard__footer",wizardFooterCancel:"pf-v5-c-wizard__footer-cancel",wizardInnerWrap:"pf-v5-c-wizard__inner-wrap",wizardMain:"pf-v5-c-wizard__main",wizardMainBody:"pf-v5-c-wizard__main-body",wizardNav:"pf-v5-c-wizard__nav",wizardNavItem:"pf-v5-c-wizard__nav-item",wizardNavLink:"pf-v5-c-wizard__nav-link",wizardNavLinkText:"pf-v5-c-wizard__nav-link-text",wizardNavLinkToggle:"pf-v5-c-wizard__nav-link-toggle",wizardNavLinkToggleIcon:"pf-v5-c-wizard__nav-link-toggle-icon",wizardNavList:"pf-v5-c-wizard__nav-list",wizardOuterWrap:"pf-v5-c-wizard__outer-wrap",wizardToggle:"pf-v5-c-wizard__toggle",wizardToggleIcon:"pf-v5-c-wizard__toggle-icon",wizardToggleList:"pf-v5-c-wizard__toggle-list",wizardToggleListItem:"pf-v5-c-wizard__toggle-list-item",wizardToggleNum:"pf-v5-c-wizard__toggle-num",wizardToggleSeparator:"pf-v5-c-wizard__toggle-separator"};var J;(function(e){e.Default="default",e.Error="error"})(J||(J={}));var H;(function(e){e.Next="next",e.Back="back",e.Nav="nav"})(H||(H={}));function Le(e){return typeof e=="function"||t.isValidElement(e)}function ee(e){return typeof e=="function"||t.isValidElement(e)}function se(e){return typeof e=="function"||t.isValidElement(e)}function Pe(e){return e?.subStepIds===void 0&&!R(e)}function R(e){return e?.parentId!==void 0}function M(e){return e?.subStepIds!==void 0}const re=e=>{var{children:a,className:o}=e,s=O(e,["children","className"]);return t.createElement("footer",Object.assign({className:h(z.wizardFooter,o)},s),a)},Y=e=>{var{activeStep:a}=e,o=O(e,["activeStep"]);const s=!se(a?.footer)&&a?.footer;return t.createElement(De,Object.assign({},o,s))},De=e=>{var{onNext:a,onBack:o,onClose:s,isNextDisabled:r,isBackDisabled:i,isBackHidden:u,isCancelHidden:d,nextButtonText:c="Next",backButtonText:n="Back",cancelButtonText:g="Cancel",nextButtonProps:x,backButtonProps:f,cancelButtonProps:l,className:E}=e,p=O(e,["onNext","onBack","onClose","isNextDisabled","isBackDisabled","isBackHidden","isCancelHidden","nextButtonText","backButtonText","cancelButtonText","nextButtonProps","backButtonProps","cancelButtonProps","className"]);return t.createElement(re,Object.assign({className:E},p),!u&&t.createElement(q,Object.assign({variant:G.secondary,onClick:o,isDisabled:i},f),n),t.createElement(q,Object.assign({variant:G.primary,type:"submit",onClick:a,isDisabled:r},x),c),!d&&t.createElement("div",{className:z.wizardFooterCancel},t.createElement(q,Object.assign({variant:G.link,onClick:s},l),g)))};re.displayName="WizardFooterWrapper";Y.displayName="WizardFooter";const Z=t.createContext({}),oe=({steps:e,footer:a,activeStepIndex:o,children:s,onNext:r,onBack:i,onClose:u,goToStepById:d,goToStepByName:c,goToStepByIndex:n,shouldFocusContent:g,mainWrapperRef:x})=>{const[f,l]=t.useState(e),[E,p]=t.useState();t.useEffect(()=>{if(f.length!==e.length){const w=e.map(C=>{const F=f.find(K=>K.id===C.id);return F?Object.assign(Object.assign({},F),C):C});l(w)}},[f,e]);const N=t.useMemo(()=>f.map((w,C)=>Object.assign(Object.assign({},w),e[C])),[e,f]),v=t.useMemo(()=>N.find(w=>w.index===o),[o,N]),y=t.useCallback(()=>u?.(null),[u]),S=t.useCallback(()=>r(null,N),[r,N]),B=t.useCallback(()=>i(null,N),[i,N]),m=t.useMemo(()=>{const w=v?.footer||E||a;if(se(w)){const C=w;return typeof C=="function"?C(v,S,B,y):C}return t.createElement(Y,Object.assign({activeStep:v,onNext:S,onBack:B,onClose:y,isBackDisabled:v?.index===1||R(v)&&v?.index===2},w))},[E,a,v,S,B,y]),j=t.useCallback(w=>N.find(C=>C.id===w),[N]),L=t.useCallback(w=>l(C=>C.map(F=>F.id===w.id?Object.assign(Object.assign({},F),w):F)),[]);return t.createElement(Z.Provider,{value:{steps:N,activeStep:v,footer:m,close:y,getStep:j,setStep:L,goToNextStep:S,goToPrevStep:B,setFooter:p,goToStepById:t.useCallback(w=>d(N,w),[d,N]),goToStepByName:t.useCallback(w=>c(N,w),[c,N]),goToStepByIndex:t.useCallback(w=>n(null,N,w),[n,N]),shouldFocusContent:g,mainWrapperRef:x}},s)};oe.displayName="WizardContextProvider";const $=()=>t.useContext(Z),V=e=>{var{children:a,steps:o}=e,s=O(e,["children","steps"]);const{activeStep:r,setStep:i}=$(),{id:u,name:d,body:c,isDisabled:n,isHidden:g,navItem:x,footer:f,status:l}=s,E=M(r);return t.useEffect(()=>{i(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({id:u,name:d},c&&{body:c}),n&&{isDisabled:n}),g&&{isHidden:g}),x&&{navItem:x}),f&&{footer:f}),l&&{status:l}),!E&&u===r?.id&&!r?.isVisited&&{isVisited:!0}))},[c,f,u,n,g,d,x,l,E,i,r?.id,r?.isVisited]),t.createElement(t.Fragment,null,a)};V.displayName="WizardStep";const He=e=>t.Children.toArray(e).reduce((a,o,s)=>{if(Ae(o)){const{props:r}=o,{steps:i,id:u}=r,d=a.length+1,c=[];a.push(Object.assign(Object.assign(Object.assign({index:d,component:o},s===0&&!i?.length&&{isVisited:!0}),i&&{subStepIds:i?.map((n,g)=>(c.push(Object.assign(Object.assign({index:d+g+1,component:n,parentId:u},s===0&&g===0&&{isVisited:!0}),te(n.props))),n.props.id))}),te(r)),...c)}else throw new Error("Wizard only accepts children of type WizardStep.");return a},[]);function Ae(e){return t.isValidElement(e)&&e.type===V}const te=e=>{var{children:a,steps:o}=e,s=O(e,["children","steps"]);return s},ae=(e,a)=>{if(!M(a)&&!a.isHidden&&!a.isDisabled)if(R(a)){const o=e.find(s=>s.id===a.parentId);if(!o.isHidden&&!o.isDisabled)return!0}else return!0;return!1},le=e=>{var{children:a,className:o,hasNoPadding:s=!1,"aria-label":r,"aria-labelledby":i,component:u="div"}=e,d=O(e,["children","className","hasNoPadding","aria-label","aria-labelledby","component"]);const[c,n]=t.useState(!1),[g,x]=t.useState(void 0),f=u,{activeStep:l,shouldFocusContent:E,mainWrapperRef:p}=t.useContext(Z),N=r||`${l?.name} content`;return t.useEffect(()=>{const y=pe(()=>{if(p?.current){const{offsetWidth:B,offsetHeight:m,scrollHeight:j}=p.current;g!==B&&(x(B),n(m<j))}},250);let S=()=>{};if(p?.current){S=me(p.current,y);const{offsetHeight:B,scrollHeight:m}=p.current;n(B<m),x(p.current.offsetWidth)}return()=>{S()}},[g]),t.createElement(f,Object.assign({ref:p},E&&{tabIndex:-1},u==="div"&&c&&{role:"region"},c&&{"aria-label":N,"aria-labelledby":i,tabIndex:0},{className:h(z.wizardMain,o)},d),t.createElement("div",{className:h(z.wizardMainBody,s&&z.modifiers.noPadding)},a))};le.displayName="WizardBody";const de=({steps:e,activeStep:a,footer:o,nav:s,isNavExpanded:r,toggleNavExpanded:i,"aria-label":u="Wizard toggle"})=>{const d=R(a),c=d&&e.find(l=>l.id===a.parentId),g=e.filter(l=>!R(l)).indexOf(c||a)+1,x=t.useCallback(l=>{r&&l.key===ve.Escape&&i?.(l)},[r,i]);t.useEffect(()=>{const l=typeof document<"u"?document.body:null;return l?.addEventListener("keydown",x,!1),()=>{l?.removeEventListener("keydown",x,!1)}},[x]);const f=e.map(l=>{var E;const p=((E=l.component)===null||E===void 0?void 0:E.props)||{},{children:N,body:v}=p,y=O(p,["children","body"]);return t.createElement(t.Fragment,{key:l.id},a?.id===l.id&&(v||v===void 0?t.createElement(le,Object.assign({},v),N):N),t.createElement("div",{key:l.id,style:{display:"none"}},t.createElement(V,Object.assign({},y))))});return t.createElement(t.Fragment,null,t.createElement("button",{onClick:i,className:h(z.wizardToggle,r&&"pf-m-expanded"),"aria-label":u,"aria-expanded":r},t.createElement("span",{className:h(z.wizardToggleList)},t.createElement("span",{className:h(z.wizardToggleListItem)},t.createElement("span",{className:h(z.wizardToggleNum)},g)," ",c?.name||a?.name,d&&t.createElement(ne,{className:h(z.wizardToggleSeparator),"aria-hidden":"true"})),d&&t.createElement("span",{className:h(z.wizardToggleListItem)},a?.name)),t.createElement("span",{className:h(z.wizardToggleIcon)},t.createElement(fe,{"aria-hidden":"true"}))),t.createElement("div",{className:h(z.wizardOuterWrap)},t.createElement("div",{className:h(z.wizardInnerWrap)},s,f),o))};de.displayName="WizardToggle";const Q=e=>{var{children:a,"aria-label":o,"aria-labelledby":s,isExpanded:r=!1,isInnerList:i=!1,className:u}=e,d=O(e,["children","aria-label","aria-labelledby","isExpanded","isInnerList","className"]);return i?I.createElement("ol",Object.assign({className:h(z.wizardNavList,u),role:"list"},d),a):I.createElement("nav",Object.assign({className:h(z.wizardNav,r&&z.modifiers.expanded,u),"aria-label":o,"aria-labelledby":s},d),I.createElement("ol",{className:h(z.wizardNavList),role:"list"},a))};Q.displayName="WizardNav";const Re={var:"var(--pf-v5-global--spacer--sm)"},Me={var:"var(--pf-v5-global--danger-color--100)"},A=e=>{var{children:a=null,content:o="",isCurrent:s=!1,isDisabled:r=!1,isVisited:i=!1,stepIndex:u,onClick:d,component:c="button",href:n,isExpandable:g=!1,id:x,status:f="default",target:l,ouiaId:E,ouiaSafe:p=!0,className:N}=e,v=O(e,["children","content","isCurrent","isDisabled","isVisited","stepIndex","onClick","component","href","isExpandable","id","status","target","ouiaId","ouiaSafe","className"]);const[y,S]=I.useState(!1),B=be(A.displayName,E,p);return I.useEffect(()=>{S(s)},[s]),I.createElement("li",Object.assign({className:h(z.wizardNavItem,g&&z.modifiers.expandable,g&&y&&z.modifiers.expanded,N)},v),I.createElement(c,Object.assign({},c==="a"?{tabIndex:r?-1:void 0,href:n,target:l}:{disabled:r},x&&{id:x.toString()},{onClick:m=>{m.stopPropagation(),g?S(!y||s):d?.(m,u)},className:h(z.wizardNavLink,s&&z.modifiers.current,r&&z.modifiers.disabled),"aria-disabled":r?!0:null,"aria-current":s&&!a?"step":!1},g&&{"aria-expanded":y},B),g?I.createElement(I.Fragment,null,I.createElement("span",{className:h(z.wizardNavLinkText)},o),I.createElement("span",{className:h(z.wizardNavLinkToggle)},I.createElement("span",{className:h(z.wizardNavLinkToggleIcon)},I.createElement(ne,{"aria-label":`${s?"Collapse":"Expand"} step icon`})))):I.createElement(I.Fragment,null,o,f===J.Error&&I.createElement(I.Fragment,null,I.createElement("span",{className:"pf-v5-screen-reader"},", ",f),I.createElement("span",{style:{marginLeft:Re.var}},I.createElement(ge,{color:Me.var}))))),a)};A.displayName="WizardNavItem";const $e=({nav:e,navAriaLabel:a,isVisitRequired:o,isProgressive:s,isNavExpanded:r})=>{const{activeStep:i,steps:u,goToStepByIndex:d}=$(),c=Object.assign({isExpanded:r,"aria-label":a||e?.["aria-label"]||"Wizard steps"},e?.["aria-labelledby"]&&{"aria-labelledby":e["aria-labelledby"]});return t.createElement(Q,Object.assign({},c),u.map((n,g)=>{var x;const f=u.some(p=>p.index>g+1&&p.isVisited),l=n.isDisabled||o&&!n.isVisited&&!f,E=ee(n.navItem)&&t.createElement(t.Fragment,{key:n.id},typeof n.navItem=="function"?n.navItem(n,i,u,d):n.navItem);if(M(n)&&!n.isHidden){let p,N=!1;const v=(x=n.subStepIds)===null||x===void 0?void 0:x.map((S,B)=>{const m=u.find(C=>C.id===S),j=u.some(C=>C.index>m.index&&C.isVisited),L=m.isDisabled||o&&!m.isVisited&&!j,w=ee(m.navItem)&&t.createElement(t.Fragment,{key:m.id},typeof m.navItem=="function"?m.navItem(m,i,u,d):m.navItem);if(!m.isHidden&&(B===0&&(p=m.index),i?.id===m.id&&(N=!0),!s||s&&m.index<=i.index))return w||t.createElement(A,Object.assign({key:m.id,id:m.id,content:m.name,isCurrent:i?.id===m.id,isDisabled:L||l,isVisited:m.isVisited,stepIndex:m.index,onClick:()=>d(m.index),status:m.status},m.navItem))}),y=t.Children.toArray(v).some(S=>t.isValidElement(S)&&!S.props.isDisabled);if(!s||s&&n.index<=i.index)return E||t.createElement(A,Object.assign({key:n.id,id:n.id,content:n.name,isExpandable:n.isExpandable,isCurrent:N,isDisabled:!y||l,isVisited:n.isVisited,stepIndex:p,onClick:()=>d(p),status:n.status},n.navItem),t.createElement(Q,Object.assign({},c,{isInnerList:!0}),v))}if(Pe(n)&&!n.isHidden&&(!s||s&&n.index<=i.index))return E||t.createElement(A,Object.assign({key:n.id,id:n.id,content:n.name,isCurrent:i?.id===n.id,isDisabled:l,isVisited:n.isVisited,stepIndex:n.index,onClick:()=>d(n.index),status:n.status},n.navItem))}))},ce=e=>{var{children:a,footer:o,height:s,width:r,className:i,header:u,nav:d,navAriaLabel:c,startIndex:n=1,isVisitRequired:g=!1,isProgressive:x=!1,onStepChange:f,onSave:l,onClose:E,shouldFocusContent:p=!1}=e,N=O(e,["children","footer","height","width","className","header","nav","navAriaLabel","startIndex","isVisitRequired","isProgressive","onStepChange","onSave","onClose","shouldFocusContent"]);const[v,y]=t.useState(n),S=He(a),B=t.useRef(S[n-1]),m=t.useRef(null);t.useEffect(()=>{M(B.current)&&y(n+1)},[n]),t.useEffect(()=>{v>S.length&&y(n)},[S,v,n]);const j=()=>setTimeout(()=>{var k;!((k=m?.current)===null||k===void 0)&&k.focus&&m.current.focus()},0),L=(k,T=S)=>{const b=T.find(_=>_.index>v&&ae(T,_));if(v>=T.length||!b?.index)return l?l(k):E?.(k);y(b?.index),f?.(k,b,T[v-1],H.Next),p&&j()},w=(k,T=S)=>{const b=[...T].reverse().find(_=>_.index<v&&ae(T,_));y(b?.index),f?.(k,b,T[v-1],H.Back),p&&j()},C=(k,T=S,b)=>{const _=T.length+1;b<1?b=1:b>_&&(b=_);const P=T[b-1],D=T[v-1];y(b),f?.(k,P,D,H.Nav)},F=(k=S,T)=>{const b=k.find(D=>D.id===T),_=b?.index,P=k.length+1;_>0&&_<P&&!b.isDisabled&&!b.isHidden&&y(_)},K=(k=S,T)=>{const b=k.find(D=>D.name===T),_=b?.index,P=k.length+1;_>0&&_<P&&!b.isDisabled&&!b.isHidden&&y(_)};return t.createElement(oe,{steps:S,activeStepIndex:v,footer:o,onNext:L,onBack:w,onClose:E,goToStepById:F,goToStepByName:K,goToStepByIndex:C,shouldFocusContent:p,mainWrapperRef:m},t.createElement("div",Object.assign({className:h(z.wizard,i),style:Object.assign(Object.assign({},s?{height:s}:{}),r?{width:r}:{})},N),u,t.createElement(Ke,{nav:d,navAriaLabel:c,isVisitRequired:g,isProgressive:x})))},Ke=({nav:e,navAriaLabel:a,isVisitRequired:o,isProgressive:s})=>{const{activeStep:r,steps:i,footer:u,goToStepByIndex:d}=$(),[c,n]=t.useState(!1),g=t.useMemo(()=>Le(e)?typeof e=="function"?e(c,i,r,d):e:t.createElement($e,{nav:e,navAriaLabel:a,isNavExpanded:c,isVisitRequired:o,isProgressive:s}),[r,o,s,d,c,e,a,i]);return t.createElement(de,{nav:g,footer:u,steps:i,activeStep:r,isNavExpanded:c,toggleNavExpanded:()=>n(x=>!x)})};ce.displayName="Wizard";const qe=()=>{const{t:e}=X(),a=xe();return U(ie,{isHorizontal:!0,role:"manage-clients",children:[W(ze,{name:"protocol",label:e("clientType"),labelIcon:e("clientTypeHelp"),controller:{defaultValue:""},options:a.map(o=>({key:o,value:je(e,o)}))}),W(We,{hasConfigureAccess:!0})]})},Ge=e=>{const{t:a}=X(),{trigger:o}=e,{activeStep:s,goToNextStep:r,goToPrevStep:i,close:u}=$(),d=async c=>{await o()&&c?.()};return W(Y,{activeStep:s,onNext:()=>d(r),onBack:i,onClose:u,isBackDisabled:s.index===1,backButtonText:a("back"),nextButtonText:a("next"),cancelButtonText:a("cancel")})};function st(){const{adminClient:e}=Ne(),{t:a}=X(),{realm:o}=Ee(),s=Se(),[r,i]=Ve(!1),{addAlert:u,addError:d}=we(),c=ye({defaultValues:{protocol:"openid-connect",clientId:"",name:"",description:"",publicClient:!0,authorizationServicesEnabled:!1,serviceAccountsEnabled:!1,implicitFlowEnabled:!1,directAccessGrantsEnabled:!1,standardFlowEnabled:!0,frontchannelLogout:!0,attributes:{saml_idp_initiated_sso_url_name:""}}}),{getValues:n,watch:g}=c,x=g("protocol"),f=async()=>{if(r)return;i(!0);const E=ke(n());try{const p=await e.clients.create({...E,clientId:E.clientId?.trim()});u(a("createClientSuccess"),Te.success),s(_e({realm:o,clientId:p.id,tab:"settings"}))}catch(p){d("createClientError",p)}finally{i(!1)}},l=a("createClient");return U(ue,{children:[W(Be,{titleKey:"createClient",subKey:"clientsExplain"}),W(he,{variant:"light",children:W(Ce,{...c,children:U(ce,{onClose:()=>s(Ie({realm:o})),navAriaLabel:`${l} steps`,onSave:f,footer:W(Ge,{...c}),children:[W(V,{name:a("generalSettings"),id:"generalSettings",children:W(qe,{})},"generalSettings"),W(V,{name:a("capabilityConfig"),id:"capabilityConfig",isHidden:x==="saml",children:W(Oe,{protocol:x})},"capabilityConfig"),W(V,{name:a("loginSettings"),id:"loginSettings",footer:{backButtonText:a("back"),nextButtonText:a("save"),cancelButtonText:a("cancel")},children:W(ie,{isHorizontal:!0,role:"manage-clients",children:W(Fe,{protocol:x})})},"loginSettings")]})})})]})}export{st as default};
//# sourceMappingURL=NewClientForm-B0VNwtln.js.map
