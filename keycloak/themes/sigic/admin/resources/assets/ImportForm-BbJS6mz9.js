import{jsxs as n,Fragment as C,jsx as a}from"react/jsx-runtime";import{u as b,a as F,b as y,d as w,l as S,V as x,P as A,n as T,Y as V,A as j,aq as E,h as I,L as P,b9 as k,o as O,s as H,v as N,x as U,p as $,q,ba as z}from"./main-Dml5vH_M.js";import{useState as D}from"react";import{F as K}from"./FormAccess-Dgk035ov.js";import{F as L}from"./FileUploadForm-C-SwY-TA.js";import{V as W}from"./ViewHeader-CnGpO8mW.js";import{C as X,a as Y}from"./ClientDescription-Cz5krl3V.js";import"react-dom";import"./CodeEditor-C7HQ48Ys.js";import"./FileUpload-B3CkDAbJ.js";import"./SwitchControl-DVIXTwQM.js";const B=r=>r.match(/(<.[^(><.)]+>)/g);function oe(){const{adminClient:r}=b(),{t:s}=F(),c=y(),{realm:o}=w(),i=S(),{handleSubmit:m,setValue:d,formState:p}=i,[u,h]=D({}),{addAlert:f,addError:l}=x(),g=async t=>{try{const e=await v(t);O(e,d),h(e)}catch(e){l("importParseError",e)}};async function v(t){if(!B(t))return JSON.parse(t);const e=await H(`${U(r.baseUrl)}admin/realms/${o}/client-description-converter`,{method:"POST",body:t,headers:N(await r.getAccessToken())});if(!e.ok)throw new Error(`Server responded with invalid status: ${e.statusText}`);return e.json()}return n(C,{children:[a(W,{titleKey:"importClient",subKey:"clientsExplain"}),a(A,{variant:"light",children:a(K,{isHorizontal:!0,onSubmit:m(async t=>{try{const e=await r.clients.create({...u,...$({...t,attributes:t.attributes||{}})});f(s("clientImportSuccess"),q.success),c(z({realm:o,clientId:e.id,tab:"settings"}))}catch(e){l("clientImportError",e)}}),role:"manage-clients",children:n(T,{...i,children:[a(L,{id:"realm-file",language:"json",extension:".json,.xml",helpText:s("helpFileUploadClient"),onChange:g}),a(X,{hasConfigureAccess:!0}),a(V,{name:"protocol",label:s("type"),readOnly:!0}),a(Y,{unWrap:!0}),n(j,{children:[a(E,{formState:p,allowInvalid:!0,allowNonDirty:!0,children:s("save")}),a(I,{variant:"link",component:t=>a(P,{...t,to:k({realm:o})}),children:s("cancel")})]})]})})})]})}export{oe as default};
//# sourceMappingURL=ImportForm-BbJS6mz9.js.map
