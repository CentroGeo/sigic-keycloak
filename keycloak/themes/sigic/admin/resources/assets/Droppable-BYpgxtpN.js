import{as as M,ar as O,dy as se}from"./main-Dml5vH_M.js";import*as s from"react";import{s as _}from"./DataListItemRow-B3J1tfyO.js";const re=e=>{var{className:t="",isDisabled:a=!1}=e,l=M(e,["className","isDisabled"]);return s.createElement("button",Object.assign({className:O(_.dataListItemDraggableButton,a&&_.modifiers.disabled,t),type:"button",disabled:a},l),s.createElement("span",{className:O(_.dataListItemDraggableIcon)},s.createElement(se,null)))};re.displayName="DataListDragButton";const H=s.createContext({onDrag:e=>!0,onDragMove:(e,t)=>{},onDrop:(e,t)=>!1}),oe=({children:e,onDrag:t=()=>!0,onDragMove:a=()=>{},onDrop:l=()=>!1})=>s.createElement(H.Provider,{value:{onDrag:t,onDragMove:a,onDrop:l}},e);oe.displayName="DragDrop";const p={draggable:"pf-v5-c-draggable",droppable:"pf-v5-c-droppable",modifiers:{dragging:"pf-m-dragging",dragOutside:"pf-m-drag-outside"}},T=s.createContext({zone:"defaultDroppableZone",droppableId:"defaultDroppableId"}),ne={name:"--pf-v5-c-draggable--m-dragging--BackgroundColor"};function ie(){const e=document.createElement("div");document.head.appendChild(e);const t=window.getComputedStyle(e).backgroundColor;return document.head.removeChild(e),t}function U(e){const t=ie(),a=window.getComputedStyle(e).backgroundColor;return a!==t?a:e.parentElement?U(e.parentElement):t}function le(e){if(e.getAttribute("blankDiv")==="true")for(let t=0;t<e.children.length;t++){const a=e.children[t];if(a.getAttribute("blankDiv")==="true"){e.removeChild(a),e.setAttribute("blankDiv","false");break}}}function $(e){le(e.node),e.node.classList.remove(p.modifiers.dragging),e.node.classList.remove(p.modifiers.dragOutside),e.draggableNodes.forEach((t,a)=>{t.style.transform="",t.style.transition="",e.draggableNodesRects[a]=t.getBoundingClientRect()})}function de(e,t){return e.clientX>t.x&&e.clientX<t.x+t.width&&e.clientY>t.y&&e.clientY<t.y+t.height}const ge=e=>{var{className:t,children:a,style:l={},hasNoWrapper:L=!1}=e,x=M(e,["className","children","style","hasNoWrapper"]);let[h,D]=s.useState(l);const[C,S]=s.useState(!1),[Z,F]=s.useState(!0),{zone:k,droppableId:w}=s.useContext(T),{onDrag:G,onDragMove:J,onDrop:K}=s.useContext(H);let P=0,E=0,A=null,y,z=null,Y,I,j=0;const Q=o=>{C&&(S(!1),D(l))};function W(){const o=y?y.getAttribute("data-pf-droppableid"):null;return{source:{droppableId:w,index:A},dest:o!==null?{droppableId:o,index:z}:void 0,hoveringDroppableId:o}}const ee=o=>{o.forEach($),document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",I),document.removeEventListener("contextmenu",I);const{source:d,dest:r,hoveringDroppableId:B}=W(),v=K(d,r);v&&w===B?(S(!1),D(l)):v||D(Object.assign(Object.assign({},h),{transition:"transform 0.5s cubic-bezier(0.2, 1, 0.1, 1) 0s",transform:"",background:l.background,boxShadow:l.boxShadow}))},te=(o,d,r)=>{if(y=null,d.forEach(g=>{const{node:n,rect:m,isDraggingHost:b,draggableNodes:f,draggableNodesRects:c}=g;if(de(o,m)){if(n.classList.remove(p.modifiers.dragOutside),y=n,n.getAttribute("blankDiv")!=="true"&&!b){const u=document.createElement("div");u.setAttribute("blankDiv","true");let i=-1;for(let N=0;N<f.length;N++){const R=c[N],V=N===f.length-1,q=R.y>=E-j;(q||V)&&i===-1&&(V&&!q?f[N].after(u):f[N].before(u),u.style.height=`${r.height}px`,u.style.width=`${r.width}px`,n.setAttribute("blankDiv","true"),i=N),i!==-1&&(R.y+=r.height)}f.splice(i,0,u),c.splice(i,0,r),m.height+=r.height}}else $(g),n.classList.add(p.modifiers.dragging),n.classList.add(p.modifiers.dragOutside)}),D(Object.assign(Object.assign({},h),{transform:`translate(${o.pageX-P}px, ${o.pageY-E}px)`})),F(!!y),z=null,y){const{draggableNodes:g,draggableNodesRects:n}=d.find(b=>b.node===y);let m=0;g.forEach((b,f)=>{b.style.transition="transform 0.5s cubic-bezier(0.2, 1, 0.1, 1) 0s";const c=n[f],u=c.y+c.height/2;let i=0;E<u&&o.pageY+(r.height-j)>u?i-=r.height:E>=u&&o.pageY-j<=u&&(i+=r.height),(i<=m&&i<0||i>m&&i>0)&&(z=f),b.style.transform=`translate(0, ${i}px`,m=i})}const{source:B,dest:v}=W();J(B,v)},ae=o=>{if(o.preventDefault(),C)return;const d=o.target,r=d.getBoundingClientRect(),v=Array.from(document.querySelectorAll(`[data-pf-droppable="${k}"]`)).reduce((g,n)=>{n.classList.add(p.modifiers.dragging);const m=Array.from(n.querySelectorAll(`[data-pf-draggable-zone="${k}"]`)),b=n.contains(d);b&&(A=m.indexOf(d));const f={node:n,rect:n.getBoundingClientRect(),isDraggingHost:b,draggableNodes:m.map(c=>c===d?c.cloneNode(!1):c),draggableNodesRects:m.map(c=>c.getBoundingClientRect())};return g.push(f),g},[]);if(!G({droppableId:w,index:A})){v.forEach(g=>$(g));return}h=Object.assign(Object.assign({},h),{top:r.y,left:r.x,width:r.width,height:r.height,[ne.name]:U(d),position:"fixed",zIndex:5e3}),D(h),P=o.pageX,E=o.pageY,j=E-r.y,S(!0),Y=g=>te(g,v,r),I=()=>ee(v),document.addEventListener("mousemove",Y),document.addEventListener("mouseup",I)},X=Object.assign({"data-pf-draggable-zone":C?null:k,draggable:!0,className:O(p.draggable,C&&p.modifiers.dragging,!Z&&p.modifiers.dragOutside,t),onDragStart:ae,onTransitionEnd:Q,style:h},x);return s.createElement(s.Fragment,null,C&&s.createElement("div",Object.assign({draggable:!0},x,{style:Object.assign(Object.assign({},l),{visibility:"hidden"})}),a),L?s.cloneElement(a,X):s.createElement("div",Object.assign({},X),a))};ge.displayName="Draggable";const ce=e=>{var{className:t,children:a,zone:l="defaultZone",droppableId:L="defaultId",hasNoWrapper:x=!1}=e,h=M(e,["className","children","zone","droppableId","hasNoWrapper"]);const D=Object.assign({"data-pf-droppable":l,"data-pf-droppableid":L,className:x&&s.Children.count(a)===1?O(p.droppable,t,a.props.className):O(p.droppable,t)},h);return s.createElement(T.Provider,{value:{zone:l,droppableId:L}},x?s.cloneElement(a,D):s.createElement("div",Object.assign({},D),a))};ce.displayName="Droppable";export{re as D,ge as a,oe as b,ce as c};
//# sourceMappingURL=Droppable-BYpgxtpN.js.map
