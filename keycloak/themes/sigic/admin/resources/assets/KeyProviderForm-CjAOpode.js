import{jsx as a,jsxs as c,Fragment as F}from"react/jsx-runtime";import{u as K,a as y,V,e as C,eL as d,l as E,j as S,n as T,Y as u,A as q,h as v,q as f,b as j,P as w,eK as H}from"./main-Dml5vH_M.js";import{D as O}from"./DynamicComponents-Cxsqsl9R.js";import{F as Y}from"./FormAccess-Dgk035ov.js";import{V as k}from"./ViewHeader-CnGpO8mW.js";import{u as P}from"./useParams-Cmi1OAEj.js";import"react";import"react-dom";import"./ClientSelect-DJq4F1jh.js";import"./FileUpload-B3CkDAbJ.js";import"./GroupPickerDialog-eQJqBPQt.js";import"./DataListItemRow-B3J1tfyO.js";import"./KeySelect-Ba6sDuzD.js";import"./MultiLineInput-BnUu5qtj.js";import"./AddRoleMappingModal-FlNvMd3n.js";import"./translationFormatter-DtFomvax.js";import"./useLocaleSort-DeXbTEE9.js";import"./ConfirmDialog-BN0phSta.js";import"./filter-icon-BO7Evf9d.js";import"./CodeEditor-C7HQ48Ys.js";const x=({providerType:i,onClose:o})=>{const{adminClient:t}=K(),{t:r}=y(),{id:s}=P(),{addAlert:p,addError:b}=V(),h=C().componentTypes?.[d]??[],l=E({mode:"onChange"}),{handleSubmit:g,reset:I}=l,A=async e=>{e.config&&Object.entries(e.config).forEach(([n,m])=>e.config[n]=Array.isArray(m)?m:[m]);try{s?(await t.components.update({id:s},{...e,providerType:d}),p(r("saveProviderSuccess"),f.success)):(await t.components.create({...e,providerId:i,providerType:d}),p(r("saveProviderSuccess"),f.success),o?.())}catch(n){b("saveProviderError",n)}};return S(async()=>{if(s)return await t.components.findOne({id:s})},e=>{e&&I({...e})},[]),a(Y,{isHorizontal:!0,role:"manage-realm",onSubmit:g(A),children:c(T,{...l,children:[s&&a(u,{name:"id",label:r("providerId"),labelIcon:r("providerIdHelp"),rules:{required:r("required")},readOnly:!0}),a(u,{name:"name",defaultValue:i,label:r("name"),labelIcon:r("keyProviderMapperNameHelp"),rules:{required:r("required")}}),a(O,{properties:h.find(e=>e.id===i)?.properties||[]}),c(q,{children:[a(v,{"data-testid":"add-provider-button",variant:"primary",type:"submit",children:r("save")}),a(v,{onClick:()=>o?.(),variant:"link",children:r("cancel")})]})]})})};function tr(){const{t:i}=y(),o=P(),t=j();return c(F,{children:[a(k,{titleKey:i("editProvider"),subKey:o.providerType}),a(w,{variant:"light",children:a(x,{...o,onClose:()=>t(H({realm:o.realm,tab:"providers"}))})})]})}export{x as KeyProviderForm,tr as default};
//# sourceMappingURL=KeyProviderForm-CjAOpode.js.map
