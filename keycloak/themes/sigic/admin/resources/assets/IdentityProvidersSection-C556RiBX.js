import{jsxs as d,Fragment as u,jsx as a}from"react/jsx-runtime";import{as as U,ar as $,cs as Q,cM as q,cN as J,u as W,a as f,e as X,d as v,b as Y,V as Z,j as ee,B as w,q as ae,al as te,P as re,E as L,G as N,H as S,bM as ie,_ as ne,a0 as x,cO as se,w as oe,c3 as le,f as de,T as y,ca as ce,aI as me,aJ as pe,aj as ge,h as he,cP as z,D as ue,L as B,cI as ye,b_ as fe,cQ as ve}from"./main-Dml5vH_M.js";import be,{useState as m,Fragment as Ie}from"react";import{u as Pe}from"./ConfirmDialog-BN0phSta.js";import{G as Ce,C as Oe}from"./ClickableCard-590Rkp-m.js";import{V as ke}from"./ViewHeader-CnGpO8mW.js";import{M as De}from"./ManageOrderDialog-DVYSmySu.js";import{b as we,s as A}from"./sortBy-D3c44bb2.js";import{M as Le}from"./MenuGroup-DKiCuHRE.js";import"react-dom";import"./DataListControl-CvcP3gqt.js";import"./DataListItemRow-B3J1tfyO.js";import"./Droppable-BYpgxtpN.js";import"./_baseFlatten-BhRqdSvr.js";const K=e=>{var{children:t,className:i,label:s,labelHeadingLevel:o="h1"}=e,l=U(e,["children","className","label","labelHeadingLevel"]);return be.createElement(Le,Object.assign({className:$(i),label:s,labelHeadingLevel:o},l),t)};K.displayName="DropdownGroup";function Ne(e,t,i,s){for(var o=-1,l=e==null?0:e.length;++o<l;){var c=e[o];t(s,c,i(c),e)}return s}function Se(e,t,i,s){return we(e,function(o,l,c){t(s,o,i(o),c)}),s}function xe(e,t){return function(i,s){var o=q(i)?Ne:Se,l={};return o(i,e,Q(s),l)}}var ze=Object.prototype,Ae=ze.hasOwnProperty,Be=xe(function(e,t,i){Ae.call(e,i)?e[i].push(t):J(e,i,[t])});const Ke=e=>{const{t}=f(),{realm:i}=v();return d(B,{to:ye({realm:i,providerId:e.providerId,alias:e.alias,tab:"settings"}),children:[e.displayName||e.alias,!e.enabled&&a(fe,{isRead:!0,className:"pf-v5-u-ml-sm",children:t("disabled")},`${e.providerId}-disabled`)]},e.providerId)},Ve=e=>{const{t}=f(),{realm:i}=v();return e?.organizationId?a(B,{to:ve({realm:i,id:e.organizationId,tab:"identityProviders"}),children:t("organization")},e.providerId):"â€”"};function Xe(){const{adminClient:e}=W(),{t}=f(),i=Be(X().identityProviders,"groupName"),{realm:s}=v(),o=Y(),[l,c]=m(0),p=()=>c(l+1),[h,b]=m(!1),[I,P]=m(!1),[V,C]=m(!1),[g,j]=m(!1),[O,T]=m(),{addAlert:F,addError:G}=Z();ee(async()=>e.identityProviders.find({max:1}),r=>{j(r.length===1)},[l]);const M=async(r,n,k)=>{const D={first:r,max:n,realmOnly:h};return k&&(D.search=k),await e.identityProviders.find(D)},R=r=>o(z({realm:s,providerId:r})),E=()=>Object.keys(i).map(r=>a(K,{label:r,children:A(i[r],"name").map(n=>a(ue,{value:n.id,component:"a","data-testid":n.id,onClick:()=>o(z({realm:s,providerId:n.id})),children:n.name},n.id))},r)),[H,_]=Pe({titleKey:"deleteProvider",messageKey:t("deleteConfirm",{provider:O?.alias}),continueButtonLabel:"delete",continueButtonVariant:w.danger,onConfirm:async()=>{try{await e.identityProviders.del({alias:O.alias}),p(),F(t("deletedSuccessIdentityProvider"),ae.success)}catch(r){G("deleteErrorIdentityProvider",r)}}});return d(u,{children:[a(_,{}),V&&a(De,{hideRealmBasedIdps:h,onClose:()=>{C(!1),p()}}),a(ke,{titleKey:"identityProviders",subKey:"listExplain",helpUrl:te.identityProvidersUrl}),d(re,{variant:g?"light":"default",className:g?"pf-v5-u-p-0":"",children:[!g&&d(u,{children:[a(L,{children:a(N,{component:S.p,children:t("getStarted")})}),Object.keys(i).map(r=>d(Ie,{children:[a(L,{children:d(N,{className:"pf-v5-u-mt-lg",component:S.h2,children:[r,":"]})}),a("hr",{className:"pf-v5-u-mb-lg"}),a(Ce,{hasGutter:!0,children:A(i[r],"name").map(n=>a(Oe,{"data-testid":`${n.id}-card`,onClick:()=>R(n.id),children:a(ie,{children:d(ne,{hasGutter:!0,children:[a(x,{children:a(se,{icon:n.id})}),a(x,{isFilled:!0,children:n.name})]})})},n.id))})]},r))]}),g&&a(oe,{loader:M,isPaginated:!0,ariaLabelKey:"identityProviders",searchPlaceholderKey:"searchForProvider",toolbarItem:d(u,{children:[a(y,{alignSelf:"center",children:a(ce,{label:t("hideOrganizationLinkedIdps"),id:"hideOrganizationLinkedIdps","data-testid":"hideOrganizationLinkedIdps",isChecked:h,onChange:(r,n)=>{b(n),p()}})}),a(y,{children:a(me,{"data-testid":"addProviderDropdown",onOpenChange:r=>P(r),toggle:r=>a(ge,{ref:r,onClick:()=>P(!I),variant:"primary",children:t("addProvider")}),isOpen:I,children:a(pe,{children:E()})})}),a(y,{children:a(he,{"data-testid":"manageDisplayOrder",variant:"link",onClick:()=>C(!0),children:t("manageDisplayOrder")})})]}),actions:[{title:t("delete"),onRowClick:r=>{T(r),H()}}],columns:[{name:"alias",displayKey:"name",cellRenderer:Ke},{name:"providerId",displayKey:"providerDetails",cellFormatters:[le()]},{name:"organizationId",displayKey:"linkedOrganization",cellRenderer:Ve}],emptyState:a(de,{message:t("identityProviders"),instructions:t("emptyRealmBasedIdps"),isSearchVariant:!0,secondaryActions:[{text:t("clearAllFilters"),onClick:()=>{b(!1),p()},type:w.link}]})},l)]})]})}export{Xe as default};
//# sourceMappingURL=IdentityProvidersSection-C556RiBX.js.map
