import{jsxs as u,Fragment as L,jsx as i}from"react/jsx-runtime";import{useState as T}from"react";import{a as D}from"./CodeEditor-C7HQ48Ys.js";import{a as U,M as k,m as I,h as g,K as _,dX as y,dC as R,dD as b}from"./main-Dml5vH_M.js";import{F}from"./FileUpload-B3CkDAbJ.js";const P=({id:d,onChange:s,helpText:C="helpFileUpload",unWrap:c=!1,language:x,extension:v,...r})=>{const{t}=U(),m={value:"",filename:"",isLoading:!1,modal:!1},[e,a]=T(m),p=()=>a({...e,modal:!1}),h=(l,n)=>{a({...e,filename:n.name})},o=l=>{a({...e,value:l}),s(l)},f=()=>{a({...e,modal:!0})};return u(L,{children:[e.modal&&i(k,{variant:I.small,title:t("clearFile"),isOpen:!0,onClose:p,actions:[i(g,{variant:"primary","data-testid":"clear-button",onClick:()=>{a(m),s("")},children:t("clear")},"confirm"),i(g,{"data-testid":"cancel",variant:"link",onClick:p,children:t("cancel")},"cancel")],children:t("clearFileExplain")}),c&&i(F,{id:d,...r,type:"text",value:e.value,filename:e.filename,onFileInputChange:h,onDataChange:(l,n)=>o(n),onTextChange:(l,n)=>o(n),onClearClick:f,onReadStarted:()=>a({...e,isLoading:!0}),onReadFinished:()=>a({...e,isLoading:!1}),isLoading:e.isLoading,dropzoneProps:{accept:{"application/text":[v]}}}),!c&&u(_,{label:t("resourceFile"),fieldId:d+"-filename",children:[i(F,{"data-testid":d,id:d,...r,type:"text",value:e.value,filename:e.filename,onFileInputChange:h,onDataChange:(l,n)=>o(n),onTextChange:(l,n)=>o(n),onClearClick:f,onReadStarted:()=>a({...e,isLoading:!0}),onReadFinished:()=>a({...e,isLoading:!1}),isLoading:e.isLoading,hideDefaultPreview:!0,children:!r.hideDefaultPreview&&i(D,{"aria-label":"File content",value:e.value,language:x,onChange:l=>o(l),readOnly:!r.allowEditingUploadedText})}),i(y,{children:i(R,{children:i(b,{children:t(C)})})})]})]})};export{P as F};
//# sourceMappingURL=FileUploadForm-C-SwY-TA.js.map
