import{jsx as a,jsxs as l,Fragment as D}from"react/jsx-runtime";import{useEffect as V}from"react";import{a as k,l as E,d as L,a_ as O,a$ as $,b0 as A,J as g,b1 as n,o as q,n as N,Y as c,aK as S,$ as h,A as P,aq as j,h as J,L as R,aQ as Y}from"./main-Dml5vH_M.js";import{g as w}from"./utils-C-TUnOch.js";import{D as i}from"./SwitchControl-DVIXTwQM.js";import{b as F}from"./ClientScopeTypes-DwzbyHD6.js";import{F as z}from"./FormAccess-Dgk035ov.js";const U=({clientScope:o,save:I})=>{const{t:e}=k(),r=E({mode:"onChange"}),{control:m,handleSubmit:v,setValue:p,formState:u}=r,{isDirty:x,isValid:H}=u,{realm:T}=L(),d=O(),b=$()(A.DynamicScopes),y=g({control:m,name:n("attributes.display.on.consent.screen"),defaultValue:o?.attributes?.["display.on.consent.screen"]??"true"}),C=g({control:m,name:n("attributes.is.dynamic.scope"),defaultValue:"false"}),f=(t,s)=>p(n("attributes.dynamic.scope.regexp"),s?`${t}:*`:t,{shouldDirty:!0});return V(()=>{q(o??{},p)},[o]),a(z,{role:"manage-clients",onSubmit:v(I),isHorizontal:!0,children:l(N,{...r,children:[a(c,{name:"name",label:e("name"),labelIcon:e("scopeNameHelp"),rules:{required:e("required"),onChange:t=>{b&&f(t.target.validated,!0)}}}),b&&l(D,{children:[a(i,{name:n("attributes.is.dynamic.scope"),label:e("dynamicScope"),labelIcon:e("dynamicScopeHelp"),onChange:(t,s)=>{f(s&&r.getValues("name")||"",s)},stringify:!0}),C==="true"&&a(c,{name:n("attributes.dynamic.scope.regexp"),label:e("dynamicScopeFormat"),labelIcon:e("dynamicScopeFormatHelp"),isDisabled:!0})]}),a(S,{name:"description",label:e("description"),labelIcon:e("scopeDescriptionHelp"),rules:{maxLength:{value:255,message:e("maxLength")}}}),a(h,{id:"kc-type",name:"type",label:e("type"),labelIcon:e("scopeTypeHelp"),controller:{defaultValue:F[0]},options:F.map(t=>({key:t,value:e(`clientScopeType.${t}`)}))}),!o&&a(h,{id:"kc-protocol",name:"protocol",label:e("protocol"),labelIcon:e("protocolHelp"),controller:{defaultValue:d[0]},options:d.map(t=>({key:t,value:w(e,t)}))}),a(i,{name:n("attributes.display.on.consent.screen"),defaultValue:y,label:e("displayOnConsentScreen"),labelIcon:e("displayOnConsentScreenHelp"),stringify:!0}),y==="true"&&a(S,{name:n("attributes.consent.screen.text"),label:e("consentScreenText"),labelIcon:e("consentScreenTextHelp")}),a(i,{name:n("attributes.include.in.token.scope"),label:e("includeInTokenScope"),labelIcon:e("includeInTokenScopeHelp"),stringify:!0}),a(c,{name:n("attributes.gui.order"),label:e("guiOrder"),labelIcon:e("guiOrderHelp"),type:"number",min:0}),l(P,{children:[a(j,{"data-testid":"save",formState:u,disabled:!x||!H,children:e("save")}),a(J,{variant:"link",component:t=>a(R,{...t,to:Y({realm:T})}),children:e("cancel")})]})]})})};export{U as S};
//# sourceMappingURL=ScopeForm-CcHh9uAf.js.map
