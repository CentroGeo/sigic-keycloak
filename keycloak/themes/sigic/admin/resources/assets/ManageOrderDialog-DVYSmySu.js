import{jsx as r,jsxs as g}from"react/jsx-runtime";import{u as M,a as T,V as B,j as P,y as I,M as N,m as S,E as V,G as j,h as u,B as k}from"./main-Dml5vH_M.js";import{useState as c}from"react";import{s as A}from"./sortBy-D3c44bb2.js";import{D as E}from"./DataListControl-CvcP3gqt.js";import{b as w,c as F,a as W,D as z}from"./Droppable-BYpgxtpN.js";import{D as G,a as H,b as R,c as q,d as J}from"./DataListItemRow-B3J1tfyO.js";const $=({orgId:m,hideRealmBasedIdps:h=!1,onClose:l})=>{const{adminClient:d}=M(),{t:e}=T(),{addAlert:f,addError:v}=B(),[C,s]=c(""),[p,y]=c(),[n,D]=c([]),L=({index:a})=>(s(e("onDragStart",{item:n[a]})),!0),b=({index:a})=>{s(e("onDragMove",{item:n[a]}))},x=(a,t)=>{if(t){const i=[...n],[o]=i.splice(a.index,1);return i.splice(t.index,0,o),s(e("onDragFinish",{list:i})),D(i),!0}else return s(e("onDragCancel")),!1};return P(()=>m?d.organizations.listIdentityProviders({orgId:m}):d.identityProviders.find({realmOnly:h}),a=>{y(a),D(A(a,["config.guiOrder","alias"]).map(t=>t.alias))},[]),p?g(N,{variant:S.small,title:e("manageDisplayOrder"),isOpen:!0,onClose:l,actions:[r(u,{id:"modal-confirm","data-testid":"confirm",onClick:async()=>{const a=n.map((t,i)=>{const o=p.find(O=>O.alias===t);return o.config.guiOrder=i,d.identityProviders.update({alias:t},o)});try{await Promise.all(a),f(e("orderChangeSuccess"))}catch(t){v("orderChangeError",t)}l()},children:e("save")},"confirm"),r(u,{id:"modal-cancel","data-testid":"cancel",variant:k.link,onClick:l,children:e("cancel")},"cancel")],children:[r(V,{className:"pf-v5-u-pb-lg",children:r(j,{children:e("orderDialogIntro")})}),r(w,{onDrag:L,onDragMove:b,onDrop:x,children:r(F,{hasNoWrapper:!0,children:r(G,{"aria-label":e("manageOrderTableAria"),"data-testid":"manageOrderDataList",isCompact:!0,children:n.map(a=>r(W,{hasNoWrapper:!0,children:r(H,{"aria-label":a,id:a,children:g(R,{children:[r(E,{children:r(z,{"aria-label":e("dragHelp")})}),r(q,{dataListCells:[r(J,{"data-testid":a,children:a},a)]})]})})},a))})})}),r("div",{className:"pf-v5-screen-reader","aria-live":"assertive",children:C})]}):r(I,{})};export{$ as M};
//# sourceMappingURL=ManageOrderDialog-DVYSmySu.js.map
