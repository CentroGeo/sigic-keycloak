import{jsxs as h,Fragment as y,jsx as e}from"react/jsx-runtime";import{u as F,a as D,b as v,V as K,d as C,B as S,q as g,w as V,c3 as x,aU as B,f as I,h as N,L as f,aO as j,cj as k,O as E}from"./main-Dml5vH_M.js";import{useState as P}from"react";import{t as T}from"./translationFormatter-DtFomvax.js";import{u as q}from"./ConfirmDialog-BN0phSta.js";const U=({defaultRoleName:c,toDetail:m,...a})=>{const{t:n}=D(),{realm:l}=C(),{hasAccess:d,hasSomeAccess:s}=j(),i=d("view-realm")&&s("view-clients","manage-clients");return a.name!==c?e(f,{to:m(a.id),children:a.name}):h(y,{children:[i?e(f,{to:k({realm:l,tab:"user-registration"}),children:a.name}):e("span",{children:a.name}),e(E,{helpText:n("defaultRole"),fieldLabelId:"defaultRole"})]})},M=({loader:c,paginated:m=!0,parentRoleId:a,messageBundle:n="roles",toCreate:l,toDetail:d,isReadOnly:s})=>{const{adminClient:i}=F(),{t}=D(),L=v(),{addAlert:R,addError:w}=K(),{realmRepresentation:u}=C(),[r,p]=P(),[A,b]=q({titleKey:"roleDeleteConfirm",messageKey:t("roleDeleteConfirmDialog",{selectedRoleName:r?r.name:""}),continueButtonLabel:"delete",continueButtonVariant:S.danger,onConfirm:async()=>{try{a?await i.roles.delCompositeRoles({id:a},[r]):await i.roles.delById({id:r.id}),p(void 0),R(t("roleDeletedSuccess"),g.success)}catch(o){w("roleDeleteError",o)}}});return h(y,{children:[e(b,{}),e(V,{loader:c,ariaLabelKey:"roleList",searchPlaceholderKey:"searchForRoles",isPaginated:m,toolbarItem:!s&&e(N,{"data-testid":"create-role",component:o=>e(f,{...o,to:l}),children:t("createRole")}),actions:s?void 0:[{title:t("delete"),onRowClick:o=>{p(o),u?.defaultRole&&o.name===u.defaultRole.name?R(t("defaultRoleDeleteError"),g.danger):A()}}],columns:[{name:"name",displayKey:"roleName",cellRenderer:o=>e(U,{...o,defaultRoleName:u?.defaultRole?.name,toDetail:d,messageBundle:n})},{name:"composite",displayKey:"composite",cellFormatters:[x(),B()]},{name:"description",cellFormatters:[T(t)]}],emptyState:e(I,{hasIcon:!0,message:t(`noRoles-${n}`),instructions:s?"":t(`noRolesInstructions-${n}`),primaryActionText:s?"":t("createRole"),onPrimaryAction:()=>L(l)})},r?r.id:"roleList")]})};export{M as R};
//# sourceMappingURL=RolesList-D4M15Xk_.js.map
