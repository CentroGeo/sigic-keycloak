import{jsxs as u,jsx as t}from"react/jsx-runtime";import{u as F,a as P,d as V,b as N,c as E,l as S,V as j,n as K,P as L,Y as O,K as c,O as b,E as U,G as q,A as w,h,L as C,ee as y}from"./main-Dml5vH_M.js";import{useMemo as z,useEffect as B}from"react";import{F as M}from"./FormAccess-Dgk035ov.js";import{K as R}from"./KeyValueInput-CataZRq4.js";import{V as Y}from"./ViewHeader-CnGpO8mW.js";/* empty css                               */import{u as J,U as Q}from"./UserProfileContext-CAK45ckM.js";import{T as g,s as W}from"./TranslatableField-MXbEXipf.js";import"react-dom";import"./KeySelect-Ba6sDuzD.js";import"./useLocale-mdrT38Tm.js";import"./Trans-BHLWmjXF.js";function X(n){return Object.entries(n).reduce((e,[i,o])=>typeof o=="string"?[...e,{key:i,value:o}]:[...e],[])}function Z(n){return Object.fromEntries(n.filter(e=>e.key.length>0).map(e=>[e.key,e.value]))}const x={annotations:[],displayDescription:"",displayHeader:"",name:"",translation:{key:[]}};function _(){const{adminClient:n}=F(),{t:e}=P(),{realm:i,realmRepresentation:o}=V(),{config:s,save:T}=J(),H=N(),p=E(),l=S({defaultValues:x}),{addError:v}=j(),G=!!p.name,a=z(()=>s?.groups?.find(({name:r})=>r===p.name),[s?.groups,p.name]);B(()=>{if(!a)return;const r=a.annotations?X(a.annotations):[];l.reset({...x,...a,annotations:r})},[a,l]);const A=async r=>{if(!s)return;const d=[...s.groups??[]],m=a?d.indexOf(a):-1,{translation:I,...k}=r,f={...k,annotations:Z(r.annotations)};if(m===-1?d.push(f):d[m]=f,await T({...s,groups:d})){if(o?.internationalizationEnabled)try{await W({adminClient:n,realmName:i,translationsData:{translation:I}})}catch(D){v(e("errorSavingTranslations"),D)}H(y({realm:i,tab:"attributes-group"}))}};return u(K,{...l,children:[t(Y,{titleKey:a?"editGroupText":"createGroupText",divider:!0}),t(L,{variant:"light",onSubmit:l.handleSubmit(A),children:u(M,{isHorizontal:!0,role:"manage-realm",children:[t(O,{name:"name",label:e("nameField"),labelIcon:e("nameHintHelp"),isDisabled:!!a||G,rules:{required:e("required")}}),t(c,{label:e("displayHeader"),labelIcon:t(b,{helpText:e("displayHeaderHintHelp"),fieldLabelId:"displayHeader"}),fieldId:"kc-attributes-group-display-header",children:t(g,{fieldName:"displayHeader",attributeName:"name",prefix:"profile.attribute-group"})}),t(c,{label:e("displayDescription"),labelIcon:t(b,{helpText:e("displayDescriptionHintHelp"),fieldLabelId:"displayDescription"}),fieldId:"kc-attributes-group-display-description",children:t(g,{fieldName:"displayDescription",attributeName:"name",prefix:"profile.attribute-group-description"})}),t(U,{children:t(q,{component:"h2",children:e("annotationsText")})}),t(c,{label:e("annotationsText"),fieldId:"kc-annotations",children:t(R,{label:e("annotationsText"),name:"annotations"})}),u(w,{children:[t(h,{variant:"primary",type:"submit","data-testid":"saveGroupBtn",children:e("save")}),t(h,{variant:"link",component:r=>t(C,{...r,to:y({realm:i,tab:"attributes-group"})}),children:e("cancel")})]})]})})]})}const me=()=>t(Q,{children:t(_,{})});export{me as default};
//# sourceMappingURL=AttributesGroupDetails-DlEdOB7q.js.map
